## Здраво, Cargo!

Карго е систем за изградба на Rust и менаџер на пакети. Повеќето Рустаците ја користат оваа алатка
да управуваат со своите проекти за Rust, бидејќи Cargo се справува со многу задачи за вас,
како што е градење на вашиот код, преземање на библиотеките од кои зависи вашиот код и
градење на тие библиотеки. (Ги повикуваме библиотеките на вашиот код му треба *зависности*.)

Наједноставните програми за Rust, како онаа што досега ја напишавме, немаат
зависности. Значи, ако го изградивме Hello, светот! проект со Cargo, би
користете само дел од Cargo што се справува со изградбата на вашиот код. Како што пишувате повеќе
комплексни програми за Rust, ќе додадете зависности и ако започнете проект
користење на Cargo, додавање на зависности ќе биде многу полесно да се направи.

Бидејќи огромното мнозинство од проектите од Rust го користат Cargo, остатокот од оваа книга
претпоставува дека и Вие користите Cargo. Товарот се поставува со Rust ако сте
ги користеа официјалните монтери дискутирани во делот "Инсталација". Ако ти
инсталира Rust преку некои други средства, проверете дали Cargo е инсталиран од
внесувајќи го следново во вашиот терминал:

```text
$ cargo --version
```

Ако видите број на верзијата, го имате! Ако видите грешка, како што се `команда
не е најдена`, погледнете во документацијата за вашиот метод на инсталирање
одреди како да се инсталира одделно.

### Креирање на проект со Cargo

Ајде да создадеме нов проект со користење на Cargo и да видиме како тоа се разликува од нашите
Оригинален Здраво, свет! проект. Одете назад кон вашиот *projects* директориум (или
каде и да одлучивте да го зачувате вашиот код). Потоа, на било кој оперативен систем, работи
следното:

```text
$ cargo new hello_cargo
$ cd hello_cargo
```

Првата команда создава нов директориум наречен * hello_cargo *. Ние именувавме
нашиот проект * hello_cargo * и Cargo ги креира своите датотеки во директориумот на
исто име.

Одете во директориумот *hello_cargo* и наведете ги датотеките. Ќе го видите тоа Карго
има генерирано две датотеки и еден директориум за нас: датотека *Cargo.toml* и a
*src* директориум со внатрешна датотека *main.rs*. Исто така, иницијализира нов Git
складиште заедно со датотека *.gitignore*.

> Забелешка: Git е честа верзија на контролниот систем. Можете да го промените "cargo new" во
> користете поинаков систем за контрола на верзии или нема систем за контрола на верзијата со употреба
> знакот `--vcs`. Извршете `cargo new --help' за да ги видите достапните опции.

Отворете *Cargo.toml* во вашиот уредувач на текст по избор. Треба да изгледа слично на
код во листата 1-2.

<span class="filename">Filename: Cargo.toml</span>

```toml
[package]
name = "hello_cargo"
version = "0.1.0"
authors = ["Your Name <you@example.com>"]

[dependencies]
```

<span class="caption"> Листата 1-2: Содржина на *Cargo.toml* генерирана од `cargo new"</span>

Оваа датотека е во [*TOML*][toml]<!-- ignore --> (* TOML е очигледен, минимален
јазик *) формат, кој е формат на конфигурација на Cargo.

[toml]: https://github.com/toml-lang/toml

Првата линија, `[package]`, е наслов на дел кој покажува дека
следните изјави го конфигурираат пакетот. Додека додаваме повеќе информации
оваа датотека, ќе додадеме други делови.

Следните три линии ги поставуваат информациите за конфигурацијата Карго треба да се компајлира
вашата програма: името, верзијата и кој ја напиша. Карго го добива твоето име и
е-пошта информации од вашата околина, па ако тие информации не се точни,
сега ги поправите информациите, а потоа зачувајте ја датотеката.

Последната линија, `[dependencies]`, е почеток на секцијата за да ги наведете сите
од зависностите на вашиот проект. Во Rust, пакетите на код се наведени како
* каси *. Нема да ни требаат други каси за овој проект, но ние ќе бидеме во
прв проект во Поглавје 2, па ние ќе го користиме овој дел од зависности тогаш.

Сега отворете *src/main.rs* и погледнете:

<span class="filename"> Име на датотеката: src/main.rs</span>

```rust
fn main() {
    println!("Hello, world!");
}
```

Cargo создаде Здраво, свет! програма за вас, исто како онаа што ја напишавме
во листата 1-1! Досега, разликите меѓу нашиот претходен проект и
проектот Cargo генерира се дека Карго го ставил кодот во директориумот *src*,
и имаме конфигурациска датотека *Cargo.toml* во врвниот директориум.

Cargo очекува вашите изворни датотеки да живеат во директориумот *src*. На
проектниот каталог на највисоко ниво е само за README-датотеките, информациите за лиценцата,
конфигурациските датотеки и сè друго што не е поврзано со вашиот код. Користење на Cargo
ви помага да ги организирате вашите проекти. Постои место за сè, и
сè е на свое место.

Ако сте започнале проект кој не го користи Cargo, како што правевме со Здраво,
светот! проект, можете да го претворите во проект кој го користи Cargo. Движете го
проект код во директориумот *src* и креирајте соодветен *Cargo.toml*
датотека.

### Градење и водење на Cargo проект

Ајде сега да погледнеме што е различно кога ќе го градиме и работиме Hello, world!
програма со Cargo! Од вашиот *hello_cargo* директориум, изгради го вашиот проект од
внесувајќи ја следнава команда:

```text
$ cargo build
   Compiling hello_cargo v0.1.0 (file:///projects/hello_cargo)
    Finished dev [unoptimized + debuginfo] target(s) in 2.85 secs
```

Оваа команда создава извршна датотека во *target/debug/hello_cargo* (или
*target\debug\hello_cargo.exe* во Windows) наместо во вашиот тековен
директориум. Може да ја извршите извршната датотека со оваа команда:

```text
$ ./target/debug/hello_cargo # or .\target\debug\hello_cargo.exe on Windows
Hello, world!
```

Ако се оди добро, "Hello, world!" треба да се печати до терминалот. Работи "Cargo"
build` за прв пат, исто така, предизвикува Cargo да создаде нова датотека на врвот
ниво: *Cargo.lock*. Оваа датотека ги следи точните верзии на
зависности во вашиот проект. Овој проект нема зависности, така што
датотеката е малку ретка. Нема да треба да ја менувате оваа датотека рачно; Cargo
управува со неговата содржина за вас.

Ние само што изградивме проект со `cargo build` и трчавме со него
`./target/debug/hello_cargo`, но ние исто така можеме да го користиме "cargo" за да го составиме
кодот, а потоа извршете ја извршна извршна сите во една команда:

```text
$ cargo run
    Finished dev [unoptimized + debuginfo] target(s) in 0.0 secs
     Running `target/debug/hello_cargo`
Hello, world!
```

Забележете дека овој пат не го видовме излезот што укажува на тоа дека Карго се составува
`hello_cargo`. Карго сфати дека досиејата не се сменија, па затоа само трчаше
бинарна. Ако сте го измениле вашиот изворен код, Карго ќе го обновил
проект пред да го стартувате, а вие би го виделе овој излез:

```text
$ cargo run
   Compiling hello_cargo v0.1.0 (file:///projects/hello_cargo)
    Finished dev [unoptimized + debuginfo] target(s) in 0.33 secs
     Running `target/debug/hello_cargo`
Hello, world!
```

Карго, исто така, обезбедува команда наречена "cargo check". Оваа команда брзо проверува
вашиот код за да се осигурате дека тој компилира, но не произведува извршна датотека:

```text
$ cargo check
   Checking hello_cargo v0.1.0 (file:///projects/hello_cargo)
    Finished dev [unoptimized + debuginfo] target(s) in 0.32 secs
```

Зошто не би сакале извршна програма? Често, "cargo check" е многу побрза од
`cargo build`, бидејќи го прескокнува чекорот за производство на извршна програма. Ако си
постојано проверка на вашата работа при пишување на кодот, користејќи `cargo check` ќе
го забрза процесот! Како таков, многу Рустеичани периодично управуваат со "cargo check"
како што ја пишуваат нивната програма за да се осигура дека таа се компилира. Потоа трчаат "товар"
изгради "кога ќе бидат подготвени да ја користат извршната датотека.

Ајде да го повториме она што го научивме досега за Cargo:

* Можеме да изградиме проект користејќи `карго изградба` или` товар проверка`.
* Ние можеме да изградиме и да водиме проект во еден чекор користејќи `карго тръг '.
* Наместо да го зачувате резултатот од изградбата во истиот директориум како нашиот код,
  Товарот го складира во директориумот * target / debug *.

Дополнителна предност на користење на Cargo е тоа што командите се исти не
важно кој оперативен систем го работите. Значи, во овој момент, ќе немаме
повеќе не даваат конкретни упатства за Linux и MacOS наспроти Windows.

### Градење за ослободување

Кога вашиот проект е конечно подготвен за пуштање, можете да го користите `карго изгради
- да "да ја компајлирате со оптимизирање. Оваа команда ќе создаде
извршна во * цел / порака * наместо * цел / дебагирање *. Оптимизации
го направите вашиот код за 'рѓа да работи побрзо, но со тоа што ќе го вклучите, го продолжува времето што е потребно
за вашата програма да се состави. Затоа постојат два различни профили: еден
за развој, кога сакате да ги обновите брзо и често, а друг за
градење на финалната програма што ќе му ја дадете на корисникот кој нема да биде повторно изграден
постојано и дека ќе се одвива што е можно побрзо. Ако сте бенчмарк вашиот
време на извршување на кодот, бидете сигурни дека ќе ја стартувате `карго изградбата - одговор" и реперирајте со
извршна во *цел/порака*.

### Карго како конвенција

Со едноставни проекти, Карго не обезбедува многу вредност за само користење
`rust`, но тоа ќе ја докаже својата вредност како што вашите програми стануваат покомплексни.
Со комплексни проекти составени од повеќе каси, тоа е многу полесно да се дозволи
Карго координира изградбата.

Иако проектот `hello_cargo` е едноставен, тој сега користи голем дел од реалноста
алатка која ќе ја користите во остатокот од вашата кариера во Ржа. Всушност, да работиме на било кој
постоечките проекти, можете да ги користите следните команди за да го проверите кодот
со користење на Git, промени во директориумот на тој проект и да се изгради:

```text
$ git clone someurl.com/someproject
$ cd someproject
$ cargo build
```

За повеќе информации за Cargo, проверете [нејзината документација].

[неговата документација]: https://doc.rust-lang.org/cargo/

## Резиме

Веќе сте до одличен почеток на патувањето со Rust! Во ова поглавје,
сте научиле како да:

* Инсталирајте ја најновата стабилна верзија на Rust користејќи `rustup`
* Ажурирајте во понова верзија на Rust
* Отвори локално инсталирана документација
* Напиши и изврши Здраво, свет! програма користејќи `rustc` директно
* Направете и извршите нов проект со користење на конвенциите на Карго

Ова е одлично време да се изгради посуштинска програма за да се навикнеш на читање
и пишување на Руст код. Значи, во Поглавје 2, ќе изградиме програма за погоди за игри.
Ако сакате да започнете со учење како функционираат заедничките програмски концепти
Рѓа, види Поглавје 3, а потоа се враќа во Глава 2.